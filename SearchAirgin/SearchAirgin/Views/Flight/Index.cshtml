@{
    ViewData["Title"] = "Flights";
    Layout = "_Layout";
}

<script src="lib/jquery/dist/jquery.min.js"></script>

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>

    <hr/>

    <form method="get" action="" onclick="GetByDepartureAirportID()">
        <h3>Search</h3>
        <label>DepartureAirport</label>
        <input id="txtDepartureAirport" type="text" name="departureAirport"/>
        <input type="submit" value="submit"/>
    </form>
    <br/>
    <button onclick="GetFlights_EDDF()">GetFlights_EDDF</button>

    <h3>Results</h3>
    <table id="tblFlights" class="table">
        <thead>
        <tr>
            <th>Airplane ICAO24</th>
            <th>Departure Airport</th>
            <th>Arrival Airport</th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>

<script src="js/Index.js"></script>
<script type="text/javascript">
$(document).ready(function(){
});
                
function GetByDepartureAirportID(){
    $.getJSON(
        "/flight/GetByDepartureAirportID?departureAirportID=" + $.getElementById(txtDepartureAirport).innerHTML.valueOf(),
        function(flights){
            console.log(flights)
            $("#tblFlights tbody tr").remove();
            $.map(flights, function(flight){
                $("#tblFlights tbody").append("<tr>"
                    + "<td>" + flight.icao24 + "</td>"
                    + "<td>" + flight.estDepartureAirport + "</td>"
                    + "<td>" + flight.estArrivalAirport + "</td>"
                    + "</tr>"
                )
        });
    })
}
    

function GetFlights_EDDF(){
    $.getJSON("/flight/GetFlights_EDDF",function(flights){
        console.log(flights)
        $("#tblFlights tbody tr").remove();
        $.map(flights, function(flight){
            $("#tblFlights tbody").append("<tr>"
                + "<td>" + flight.icao24 + "</td>"
                + "<td>" + flight.estDepartureAirport + "</td>"
                + "<td>" + flight.estArrivalAirport + "</td>"
                + "</tr>"
            )
        });
    })
}
</script>
